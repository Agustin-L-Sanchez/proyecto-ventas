;/*FB_PKG_DELIM*/

__d("PolarisClipsViewerClipFragment_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisClipsViewerClipFragment_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW",path:"pk"},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},{args:null,kind:"FragmentSpread",name:"PolarisClipsViewerOverlayFragment_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisClipsViewerFragment_items.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"PolarisClipsViewerFragment_items",selections:[{alias:null,args:null,concreteType:"XDTClipsItemDict",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"media",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW",path:"node.media.pk"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW",path:"node.media.id"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},action:"THROW",path:"node.media.code"},{args:null,kind:"FragmentSpread",name:"PolarisClipsViewerClipFragment_media"}],storageKey:null},action:"THROW",path:"node.media"}],storageKey:null}],type:"XDTGetClipsHomeResponseEdge",abstractKey:null};e.exports=a}),null);
__d("PolarisClipsViewerOverlayFragment_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisClipsViewerOverlayFragment_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW",path:"id"},{args:null,kind:"FragmentSpread",name:"PolarisClipsViewerOverlayContentFragment_media"},{args:null,kind:"FragmentSpread",name:"PolarisClipsViewerUserFeedbackFragment_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisClipsViewerLikeButtonFragment_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisClipsViewerLikeButtonFragment_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW",path:"pk"},{alias:null,args:null,kind:"ScalarField",name:"has_liked",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"like_count",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePolarisLikeMedia_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisClipsViewerCommentsButtonFragment_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisClipsViewerCommentsButtonFragment_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW",path:"id"},{alias:null,args:null,kind:"ScalarField",name:"comment_count",storageKey:null},{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"usePolarisClipsViewerUseLoggedOutIntentClick_user"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PolarisClipsViewerCommentsSheet_media"}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisClipsViewerPlaceholder.react",["IGDSBox.react","IGDSGlimmer.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={content:{flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",minWidth:"xeuugli",$$css:!0},description:{display:"x1rg5ohu",height:"xxk0z11",marginBottom:"x1yztbdb",width:"xh8yej3",$$css:!0},icon:{display:"x1rg5ohu",height:"xd7y6wv",marginBottom:"x12nagc",width:"x23j0i4",$$css:!0},info:{display:"x1rg5ohu",height:"xxk0z11",marginBottom:"x12nagc",width:"xz84dc7",$$css:!0},placeholder:{marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},root:{alignItems:"xpqajaz",backgroundImage:"xutac5l",display:"x78zum5",flexDirection:"x1q0g3np",height:"xilefcg",position:"xixxii4",start:"x17qophe",top:"x13vifvy",touchAction:"x5ve5x3",width:"xh8yej3",$$css:!0}};function j(){return h.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:h.jsx(c("IGDSGlimmer.react"),{index:1,xstyle:i.description})})}j.displayName=j.name+" [from "+f.id+"]";function k(){return h.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:h.jsx(c("IGDSGlimmer.react"),{index:1,xstyle:i.info})})}k.displayName=k.name+" [from "+f.id+"]";function l(){return h.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:h.jsx(c("IGDSGlimmer.react"),{index:1,xstyle:i.icon})})}l.displayName=l.name+" [from "+f.id+"]";function a(a){return h.jsxs("div",{className:c("stylex")(i.root,a.xstyle),children:[h.jsxs("div",{className:"x1iyjqo2 xs83m0k x2lwn1j xeuugli",children:[h.jsx(k,{}),h.jsx(j,{})]}),h.jsxs(c("IGDSBox.react"),{alignItems:"center",display:"flex",marginBottom:4,children:[h.jsx(l,{}),h.jsx(l,{}),h.jsx(l,{}),h.jsx(l,{}),h.jsx(l,{})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsTabRoot.react",["CometPlaceholder.react","CometRelay","PolarisClipsHomeRootQuery","PolarisClipsViewerPlaceholder.react","PolarisConditionalPageLayoutHandler.react","PolarisPageMetadata.react","PolarisShell.react","deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferredForDisplay")("PolarisClipsViewerContainer.react").__setRef("PolarisClipsTabRoot.react"));function a(a){var b=d("CometRelay").usePreloadedQuery(c("PolarisClipsHomeRootQuery"),a.queries.polarisClipsTabRootQuery);a=h.jsxs(c("PolarisShell.react"),{footerElement:null,pageIdentifier:"reelsTab",children:[h.jsx(c("PolarisPageMetadata.react"),{id:"reelsTab"}),h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx(c("PolarisClipsViewerPlaceholder.react"),{}),children:h.jsx(i,{chainingMediaID:a.props.routeProps.media_id,queryReference:b})})]});return h.jsx(c("PolarisConditionalPageLayoutHandler.react"),{mainComponent:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsVideoPlayerSurface.react",["CometImage.react","PolarisVideoHelpers","VideoPlayerHooks","VideoPlayerSurface.react","react","usePolarisShouldShowVideoThumbnail","usePolarisVideoXControllerLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect,j={thumbnail:{height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}};function k(a){var b=a.isMuted,c=a.isOverlayShowing,e=d("VideoPlayerHooks").useController();a=d("VideoPlayerHooks").useVideoPlayerViewabilityInfo();a=a==null?void 0:a.visiblePercentage;var f=a==null||a<=.15,g=d("VideoPlayerHooks").usePlaying();i(function(){e.setMuted(b,"user_initiated")},[e,b]);i(function(){f&&e.getPlayheadPosition()!==0&&e.seek(0)},[e,f]);i(function(){!c&&g&&e.pause("user_initiated")},[e,c,g])}function a(a){var b,e=a.isMuted,f=a.isOverlayShowing;a=a.post;c("usePolarisVideoXControllerLogger")({adInfo:null,analyticsContext:"reelsTab",carouselParentId:null,dashInfo:d("PolarisVideoHelpers").getDashInfoFromPost(a),id:a.id,ownerId:(b=a.owner)==null?void 0:b.id,postedAt:a.postedAt,trackingToken:a.trackingToken});b=c("usePolarisShouldShowVideoThumbnail")();return h.jsxs(c("VideoPlayerSurface.react"),{children:[b&&a.src!=null&&h.jsx(c("CometImage.react"),{src:a.src,xstyle:j.thumbnail}),h.jsx(k,{isMuted:e,isOverlayShowing:f,post:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsVideoPlayer.react",["PolarisClipsVideoPlayerSurface.react","PolarisVideo.react","PolarisVideoHelpers","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=a.isMuted,f=a.isOverlayShowing;a=a.post;b=(b=d("PolarisVideoHelpers").getSDVideoSrcFromPost(a))!=null?b:a.videoUrl;var g=d("PolarisVideoHelpers").getHDVideoSrcFromPost(a);return h.jsx(c("PolarisVideo.react"),{autoplay:!0,dashInfo:null,hdSrc:g,loopCount:-1,mediaId:a.id,originalHeight:(g=a.dimensions)==null?void 0:g.height,originalWidth:(g=a.dimensions)==null?void 0:g.width,sdSrc:b!=null?b+"#t=0.01":b,children:h.jsx(c("PolarisClipsVideoPlayerSurface.react"),{isMuted:e,isOverlayShowing:f,post:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsViewerOverlayIndicator.react",["PolarisIGAnimated.react","react","react-spring-web","stylex","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={base:{left:"x17efsva",paddingTop:"x109j2v6",paddingEnd:"x1ou2tus",paddingBottom:"x1hhzuzn",paddingStart:"x1egjynq",position:"x10l6tqk",top:"x4o5f7y",$$css:!0}},j={config:{precision:.01,tension:240},from:{opacity:0,scale:0},initial:{opacity:0,scale:0},to:[{opacity:1,scale:1},{delay:100,opacity:1,scale:1.1},{opacity:0,scale:0}]};function a(a){var b=a.OffIcon,e=a.OnIcon,f=a.size,g=a.value;a=a.xstyle;var k=c("usePrevious")(g),l=d("react-spring-web").useSpring(function(){return k==null||k===g?babelHelpers["extends"]({},j,{to:{immediate:!0,opacity:0,scale:0}}):j},[g]);l=l[0];return h.jsx(c("PolarisIGAnimated.react").div,{className:c("stylex")(i.base,a),initial:null,style:l,children:g?h.jsx(b,{alt:"",color:"ig-stroke-on-media",size:f}):h.jsx(e,{alt:"",color:"ig-stroke-on-media",size:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsViewerOverlayAudioIndicator.react",["IGDSVolumeOffFilledIcon","IGDSVolumeOnFilledIcon","PolarisClipsViewerOverlayIndicator.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={muteStyles:{backgroundColor:"xcpsgoo",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0}};function a(a){a=a.isMuted;return h.jsx(c("PolarisClipsViewerOverlayIndicator.react"),{OffIcon:c("IGDSVolumeOffFilledIcon"),OnIcon:c("IGDSVolumeOnFilledIcon"),size:32,value:a,xstyle:i.muteStyles})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsViewerOverlay.react",["CometRelay","PolarisClipsViewerOverlayAudioIndicator.react","PolarisClipsViewerOverlayContent.react","PolarisClipsViewerOverlayFragment_media.graphql","PolarisClipsViewerUserFeedback.react","PolarisIGCorePressable","emptyFunction","react","stylex","useBoolean"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j="clipsoverlay",k={isExpanded:{"::before_opacity":"xfbg1o9",$$css:!0},root:{"-webkit-tap-highlight-color":"x1i10hfl",alignItems:"xpqajaz",backgroundImage:"xutac5l",bottom:"x1ey2m1c",display:"x78zum5",end:"xds687c",flexDirection:"x1q0g3np",paddingTop:"x1cnzs8",paddingEnd:"xn6708d",paddingBottom:"xx6bls6",paddingStart:"x1swvt13",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",zIndex:"x1vjfegm","::before_backgroundColor":"x1hqtmwg","::before_bottom":"xhq5o37","::before_content":"x1cpjm7i","::before_end":"x1ryaae9","::before_opacity":"x124lp2h","::before_position":"x1hmns74","::before_start":"x1mhyesy","::before_top":"x1y3wzot","::before_transitionDuration":"x1du1w5e","::before_transitionProperty":"x1de4urk","::before_transitionTimingFunction":"xn05597","::before_zIndex":"xy5mcqj",$$css:!0}},l=h!==void 0?h:h=b("PolarisClipsViewerOverlayFragment_media.graphql");function a(a){var b=a.fragmentKey;a=a.isMuted;b=d("CometRelay").useFragment(l,b);var e=c("useBoolean")(!1),f=function(a){a.stopPropagation(),e.setTrue()},g=function(a){a.stopPropagation(),e.setFalse()};return i.jsxs(c("PolarisIGCorePressable"),{className:c("stylex")(k.root,e.value&&k.isExpanded),id:""+j+b.id,onPointerDown:function(a){e.value&&a.stopPropagation()},onPress:e.value?g:c("emptyFunction"),children:[i.jsx(c("PolarisClipsViewerOverlayAudioIndicator.react"),{isMuted:a}),i.jsx(c("PolarisClipsViewerOverlayContent.react"),{fragmentKey:b,isExpanded:e.value,onExpand:e.value?c("emptyFunction"):f}),i.jsx(c("PolarisClipsViewerUserFeedback.react"),{fragmentKey:b,iconColor:"ig-stroke-on-media",shadow:!0})]})}a.displayName=a.name+" [from "+f.id+"]";g.OVERLAY_ID_PREFIX=j;g.PolarisClipsViewerOverlay=a}),98);
__d("PolarisClipsViewerSensitivityOverlay.react",["PolarisSensitivityOverlay.react","react","usePolarisMediaSensitivityOverlay"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,d=a.children,e=a.post;a=c("usePolarisMediaSensitivityOverlay")(e,"reelsTab");var f=a.handleHideSensitivityOverlay,g=a.mediaOverlayCoverInfo;a=a.shouldShowSensitivityOverlay;b=(b=e.owner)==null?void 0:b.id;return a&&b!=null?h.jsx("div",{className:"x78zum5 x5yr21d",children:h.jsx(c("PolarisSensitivityOverlay.react"),{analyticsContext:"reelsTab",dimensions:e.dimensions,isPhoto:!1,mediaId:e.id,mediaOverlayCoverInfo:g,onShowPostClicked:function(){return f(e)},ownerId:b,previewData:null})}):d}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsViewerClip.react",["cx","CometRelay","PolarisClipsVideoPlayer.react","PolarisClipsViewerClipFragment_media.graphql","PolarisClipsViewerOverlay.react","PolarisClipsViewerSensitivityOverlay.react","PolarisIGAnimated.react","PolarisPostModalContext.react","PolarisReactRedux","polarisPostSelectors","react","react-spring-web"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=i!==void 0?i:i=b("PolarisClipsViewerClipFragment_media.graphql"),l=3/5;function a(a){var b=a.fragmentKey,e=a.isMuted,f=a.showOverlay,g=d("CometRelay").useFragment(k,b);a=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getPostById(a,g.pk)});b=((b=g.original_width)!=null?b:1)/((b=g.original_height)!=null?b:1)<l;var h=function(a){a.preventDefault();a.stopPropagation();return!1},i=d("react-spring-web").useSpring(function(){return{opacity:f?1:0}},[f]);i=i[0];return j.jsx(d("PolarisPostModalContext.react").PostModalContext,{post:a,children:j.jsx("div",{className:"_a8b4"+(b?" _acjh":""),"data-testid":void 0,onContextMenu:h,children:j.jsx(c("PolarisClipsViewerSensitivityOverlay.react"),{post:a,children:j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisClipsVideoPlayer.react"),{isMuted:e,isOverlayShowing:f,post:a}),j.jsx(c("PolarisIGAnimated.react").div,{style:i,children:j.jsx(d("PolarisClipsViewerOverlay.react").PolarisClipsViewerOverlay,{fragmentKey:g,isMuted:e})})]})})})},a.id)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("buildPolarisClipsViewerClipSpringStyles",[],(function(a,b,c,d,e,f){"use strict";var g={clamp:!0,friction:20,tension:210};function a(a,b,c,d,e){e===void 0&&(e=!1);return function(f){var h=f<a.current-1||f>a.current+1;f=(f-a.current)*b+(d?c:0);return{config:g,immediate:e||h,y:f}}}f["default"]=a}),66);
__d("usePolarisClipsTabPositionRestore",["PolarisUA","usePolarisClipsLastViewedClip"],(function(a,b,c,d,e,f,g){"use strict";function h(){return!d("PolarisUA").isDesktop()}function a(a){var b=c("usePolarisClipsLastViewedClip")(),d=b[0];b=b[1];d=(d=d)!=null?d:{};var e=d.id;d=d.idx;a=d==null?null:(a=a[d])==null?void 0:(a=a.node)==null?void 0:(a=a.media)==null?void 0:a.pk;a=e!=null&&d!=null&&a!=null&&a===e;return{lastViewedClipIndex:d!=null&&a&&h()?d:0,setLastViewedClip:b}}g["default"]=a}),98);
__d("usePolarisClipsViewerAutoplayRules",["VideoPlayerAutoplayRulesProvider","VideoPlayerViewabilityConstants","createEvaluateVideoAutoplayPauseOnInvisibleRule","evaluateVideoAutoplayIgnoreOnFrozenRule","evaluateVideoAutoplayPauseOnBackgroundedRule","evaluateVideoAutoplayPauseOnHiddenSubtreeRule"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("VideoPlayerAutoplayRulesProvider").makeVideoPlayerAutoplayRules([c("evaluateVideoAutoplayIgnoreOnFrozenRule"),c("createEvaluateVideoAutoplayPauseOnInvisibleRule")(c("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE),c("evaluateVideoAutoplayPauseOnHiddenSubtreeRule"),c("evaluateVideoAutoplayPauseOnBackgroundedRule")])}g["default"]=a}),98);
__d("usePolarisClipsViewerGesture",["PolarisClipsViewerOverlay.react","react","react-use-gesture"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useRef,i={axis:"y",filterTaps:!0,pointer:{touch:!0},triggerAllEvents:!0};function j(a){window.clearTimeout(a.current.timeoutID),a.current={isLongPress:!1,timeoutID:null}}function a(a,b){var c=h({isLongPress:!1,timeoutID:null});return d("react-use-gesture").useDrag(function(e){var f=e.event,g=e.active,h=e.down,i=e.movement;i[0];i=i[1];var k=e.direction;k[0];k=k[1];var l=e.cancel,m=e.first;e=e.swipe;e[0];e=e[1];f=!g&&!(f==null?void 0:f.target.id.startsWith(d("PolarisClipsViewerOverlay.react").OVERLAY_ID_PREFIX));var n=Math.abs(i);c.current.timeoutID===null&&!m&&n===0&&h&&!f&&(c.current.timeoutID=window.setTimeout(function(){c.current.isLongPress=!0,b.onLongPressStart()},250));!m&&n===0&&!h&&!f&&(c.current.isLongPress===!0?(j(c),b.onLongPressEnd()):(j(c),b.onTap()));!m&&!h&&b.onLongPressEnd();c.current!==null&&h&&n>0&&j(c);f=e!==0;m=g&&n>a/2||f;if(m){f?h=-e:h=k>0?-1:1;b.onPositionChange(h);b.onDrag(i,!1);f||l()}else b.onDrag(i,g)},i)}g["default"]=a}),98);
__d("usePolarisClipsViewerManageSeenClips",["PolarisConfig","PolarisNavigationActions","PolarisReactRedux","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback,i=3;function a(a){var b=d("PolarisReactRedux").useDispatch();return h(function(c){a.current.add(c),d("PolarisConfig").isLoggedIn()||a.current.size>i&&window.setTimeout(function(){b(d("PolarisNavigationActions").openLoginModal(d("PolarisConfig").isLoggedOutFRXEligible()?"feature_wall":"content_wall","/","post_chaining_impression_limit"))},500)},[b,a])}g["default"]=a}),98);
__d("PolarisClipsViewer.react",["cx","CometRelay","CometRouteParams","PolarisClipsViewerClip.react","PolarisClipsViewerFragment_items.graphql","PolarisClipsViewerPlaceholder.react","PolarisConfig","PolarisErrorBoundary.react","PolarisIGAnimate","PolarisOrganicImpressionAction","PolarisReactRedux","PolarisViewpointReact.react","PolarisVpvdImpressionAction","VideoAutoplayLocalScopeProvider.react","VideoAutoplayManagerX.react","XPolarisClipsTabControllerRouteBuilder","buildPolarisClipsViewerClipSpringStyles","clamp","react","react-spring-web","replaceURL","usePolarisClipsTabPositionRestore","usePolarisClipsViewerAutoplayRules","usePolarisClipsViewerGesture","usePolarisClipsViewerManageSeenClips","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.startTransition,l=e.useEffect,m=e.useMemo,n=e.useRef,o=e.useState,p=i!==void 0?i:i=b("PolarisClipsViewerFragment_items.graphql"),q={height:"100%",left:0,position:"absolute",top:0,transformOrigin:"top",width:"100%"},r={placeholder:{height:"x5yr21d",position:"x1n2onr6",$$css:!0}};function s(a,b,e){b=c("XPolarisClipsTabControllerRouteBuilder").buildUri({shortcode:b}).getPath();a({pageIdentifier:"reelsTab",path:b,postID:e,type:"NAVIGATION_LOCATION_LOADED"});d("PolarisConfig").isLoggedIn()&&c("replaceURL")(b)}function a(a){var b=a.isLoadingNext,e=a.loadNextPage,f=a.queryReference;a=a.seenClipIDsRef;var g=o(!0),h=g[0],i=g[1];g=o(!0);var t=g[0],u=g[1];g=c("useRoutePassthroughProps")();var v=g==null?void 0:g.index,w=d("CometRelay").useFragment(p,f),x=m(function(){return(w==null?void 0:w.length)&&typeof v==="number"?[].concat(w.slice(v,w.length),w.slice(0,v)):w},[v,w]);g=c("usePolarisClipsTabPositionRestore")(x);f=g.lastViewedClipIndex;var y=g.setLastViewedClip,z=n(f),A=n(!0),B=d("CometRouteParams").useRouteParams(),C=d("PolarisReactRedux").useDispatch();l(function(){if(A.current===!1)return;var a=x[z.current].node.media,b=a.code;a=a.id;a=a.split("_")[0];if(B.shortcode!==b){s(C,(b=b)!=null?b:"",a)}A.current=!1},[C,x,B.shortcode]);g=o(null);f=g[0];g=g[1];var D=(f=f==null?void 0:f.clientHeight)!=null?f:0,E=b===!0?x.length+1:x.length;f=d("react-spring-web").useSprings(E,c("buildPolarisClipsViewerClipSpringStyles")(z,D,0,!1,!0),[D]);var F=f[0],G=f[1];f=m(function(){return{onDrag:function(a,b){G.start(c("buildPolarisClipsViewerClipSpringStyles")(z,D,a,b))},onLongPressEnd:function(){var a=x[z.current];if(a==null)return;k(function(){u(!0)})},onLongPressStart:function(){var a=x[z.current];if(a==null)return;k(function(){u(!1)})},onPositionChange:function(a){z.current=c("clamp")(z.current+a,0,E-1);a=x[z.current];if(a==null)return;a=x[z.current].node.media;s(C,a.code,a.pk);k(function(){u(!0)});e&&E-z.current<3&&e()},onTap:function(){i(function(a){return!a})}}},[x,E,C,e,G,D]);f=c("usePolarisClipsViewerGesture")(D,f);var H=c("usePolarisClipsViewerManageSeenClips")(a);a=c("usePolarisClipsViewerAutoplayRules")();return j.jsx("div",babelHelpers["extends"]({className:"_a8hp"},f(),{ref:g,children:j.jsx(c("VideoAutoplayManagerX.react"),{children:j.jsx(c("VideoAutoplayLocalScopeProvider.react"),{autoplayLocalRules:a,children:F.map(function(e,a){var f=e.y;e=a+1===E;if(e&&b===!0)return j.jsx(d("PolarisIGAnimate").Animated.div,{style:babelHelpers["extends"]({y:f},q),children:j.jsx(c("PolarisClipsViewerPlaceholder.react"),{xstyle:r.placeholder})},"placeholder");var g=x[a].node.media;e=[d("PolarisOrganicImpressionAction").makeClipImpressionAction({id:g.pk,owner:{id:g.id.split("_")[1]}},"reelsTab"),d("PolarisVpvdImpressionAction").makeClipVpvdImpressionAction({id:g.pk},a,"reelsTab"),function(b){b.state==="entered"&&(y({id:g.pk,idx:a,y:0}),H(g.id))}];return j.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:e,id:g.id,children:function(a){return j.jsx(d("PolarisIGAnimate").Animated.div,{forwardRef:a,style:babelHelpers["extends"]({y:f},q),children:j.jsx(c("PolarisErrorBoundary.react"),{children:j.jsx(c("PolarisClipsViewerClip.react"),{fragmentKey:g,isMuted:h,showOverlay:t})})})}},g.id)})})})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsViewerContainer.react",["CometRelay","IGDSBox.react","PolarisAutoplayContextProvider.react","PolarisClipsHomeFragment","PolarisClipsViewer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useRef;function k(a){a=Array.from(a.current).map(function(a){return{id:a.split("_")[0]}});return JSON.stringify(a)}function a(a){var b=j(new Set()),e=d("CometRelay").usePaginationFragment(c("PolarisClipsHomeFragment"),a.queryReference),f=e.data,g=e.isLoadingNext,l=e.loadNext;e=i(function(){if(g)return;var c={container_module:"clips_viewer_clips_tab",seen_reels:k(b)};a.chainingMediaID!=null&&(c=babelHelpers["extends"]({},c,{chaining_media_id:a.chainingMediaID,should_refetch_chaining_media:!1}));b.current=new Set();l(10,{UNSTABLE_extraVariables:{data:c}})},[g,l,a.chainingMediaID]);return h.jsx(c("PolarisAutoplayContextProvider.react"),{children:h.jsx(c("IGDSBox.react"),{display:"flex",flex:"grow",width:"100%",children:h.jsx(c("PolarisClipsViewer.react"),{isLoadingNext:g,loadNextPage:e,queryReference:f.xdt_api__v1__clips__home__connection.edges,seenClipIDsRef:b})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsViewerLikeButton.react",["CometRelay","PolarisClipsViewerControlIconContainer.react","PolarisClipsViewerControlIconLabel.react","PolarisClipsViewerLikeButtonFragment_media.graphql","PolarisLikeButton.react","PolarisPostDetailsSectionProvider.react","react","usePolarisLikeMedia"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("PolarisClipsViewerLikeButtonFragment_media.graphql");function a(a){var b=a.fragmentKey,e=a.iconColor;a=a.shadow;var f=d("CometRelay").useFragment(j,b);b=d("PolarisPostDetailsSectionProvider.react").usePolarisPostDetailsSectionProvider();var g=c("usePolarisLikeMedia")({analyticsContext:b,mediaFragmentKey:f,sourceOfLike:"button"});return i.jsx(c("PolarisClipsViewerControlIconContainer.react"),{numLabel:f.like_count,children:i.jsxs(i.Fragment,{children:[i.jsx("div",{children:i.jsx(c("PolarisLikeButton.react"),{color:e,isLiked:(b=f.has_liked)!=null?b:!1,onChange:function(a){return g(f.pk,a)},padding:0,shadow:a})}),i.jsx(c("PolarisClipsViewerControlIconLabel.react"),{iconColor:e,numLabel:(b=f.like_count)!=null?b:0,shadow:a})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsViewerCommentsButton.react",["fbt","CometPlaceholder.react","CometRelay","IGDSCommentPanoOutlineIcon","PolarisClipsViewerCommentsButtonFragment_media.graphql","PolarisClipsViewerControlIcon.react","PolarisConfig","deferredLoadComponent","react","requireDeferred","usePolarisClipsViewerUseLoggedOutIntentClickGated"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=d("react").useState,l=c("deferredLoadComponent")(c("requireDeferred")("PolarisClipsViewerCommentsSheet.react").__setRef("PolarisClipsViewerCommentsButton.react")),m=h._("__JHASH__4Bxcnayze-g__JHASH__"),n=i!==void 0?i:i=b("PolarisClipsViewerCommentsButtonFragment_media.graphql");function a(a){var b=a.fragmentKey,e=a.iconColor;a=a.shadow;b=d("CometRelay").useFragment(n,b);var f=c("usePolarisClipsViewerUseLoggedOutIntentClickGated")(b.user),g=k(!1),h=g[0],i=g[1];return j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisClipsViewerControlIcon.react"),{alt:m,Icon:c("IGDSCommentPanoOutlineIcon"),iconColor:e,numLabel:(g=b.comment_count)!=null?g:0,onClick:d("PolarisConfig").isLoggedIn()?function(){return i(!0)}:function(){return f("post_feedback_comment")},shadow:a}),h?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(l,{fragmentKey:b,onClose:function(){return i(!1)},postID:b.id})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);